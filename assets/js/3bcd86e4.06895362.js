"use strict";(self.webpackChunkjanzhou_123_github_io=self.webpackChunkjanzhou_123_github_io||[]).push([[9275],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),m=l(n),g=o,f=m["".concat(p,".").concat(g)]||m[g]||u[g]||i;return n?r.createElement(f,s(s({ref:t},c),{},{components:n})):r.createElement(f,s({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=g;var a={};for(var p in t)hasOwnProperty.call(t,p)&&(a[p]=t[p]);a.originalType=e,a[m]="string"==typeof e?e:o,s[1]=a;for(var l=2;l<i;l++)s[l]=n[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},3948:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const i={slug:"nestjs-config-@nestjs/config",title:"Nestjs\u901a\u7528\u914d\u7f6e-\u57fa\u7840\u914d\u7f6e",date:new Date("2022-09-25T00:00:00.000Z"),authors:"zxx",tags:["Nestjs","nestjs/config"],keywords:["Nestjs","nestjs/config"],description:"Nestjs\u57fa\u7840\u914d\u7f6e-@nestjs/config"},s=void 0,a={permalink:"/blog/nestjs-config-@nestjs/config",source:"@site/blog/Nestjs-Base/Nestjs\u901a\u7528\u914d\u7f6e-\u57fa\u7840\u914d\u7f6e.md",title:"Nestjs\u901a\u7528\u914d\u7f6e-\u57fa\u7840\u914d\u7f6e",description:"Nestjs\u57fa\u7840\u914d\u7f6e-@nestjs/config",date:"2022-09-25T00:00:00.000Z",formattedDate:"September 25, 2022",tags:[{label:"Nestjs",permalink:"/blog/tags/nestjs"},{label:"nestjs/config",permalink:"/blog/tags/nestjs-config"}],readingTime:1.95,hasTruncateMarker:!1,authors:[{name:"Zhouxiaoxiao",title:"\u575a\u6301\u5b66\u4e60\uff0c\u575a\u6301\u8fdb\u6b65",url:"https://github.com/janzhou123",imageURL:"https://github.com/janzhou123.png",key:"zxx"}],frontMatter:{slug:"nestjs-config-@nestjs/config",title:"Nestjs\u901a\u7528\u914d\u7f6e-\u57fa\u7840\u914d\u7f6e",date:"2022-09-25T00:00:00.000Z",authors:"zxx",tags:["Nestjs","nestjs/config"],keywords:["Nestjs","nestjs/config"],description:"Nestjs\u57fa\u7840\u914d\u7f6e-@nestjs/config"},prevItem:{title:"Nestjs\u901a\u7528\u914d\u7f6e-\u57fa\u7840\u8fdb\u96361",permalink:"/blog/nestjs-config\u8fdb\u96361"},nextItem:{title:"Git\u5e38\u7528\u547d\u4ee4",permalink:"/blog/git-basic-usage"}},p={authorsImageUrls:[void 0]},l=[],c={toc:l},m="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(m,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u901a\u5e38\u6211\u4eec\u5efa\u7acb\u540e\u53f0\u5e94\u7528\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u662f\u9700\u8981\u63d0\u524d\u914d\u7f6e\u4e00\u4e9b\u5de5\u7a0b\u53c2\u6570\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u5730\u5740\\\u7528\u6237\u540d\u5bc6\u7801\uff0credis \u5730\u5740\\\u5bc6\u7801\u7b49\u7b49\uff0c\u672c\u7bc7\u6587\u7ae0\u5c06\u4ecb\u7ecd Nestjs \u5b98\u65b9\u6307\u5b9a\u7684\u914d\u7f6e\u65b9\u5f0f",(0,o.kt)("inlineCode",{parentName:"p"},"@nestjs/config"),"\u3002"),(0,o.kt)("admonition",{title:"\u63d0\u793a",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"\u8fd9\u91cc\u5047\u5b9a\u4f60\u5df2\u7ecf\u5efa\u7acb\u4e00\u4e2a Nestjs \u5de5\u7a0b\uff0c\u5982\u679c\u6ca1\u6709\u8bf7\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a"),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"nest new config-demo"))),(0,o.kt)("p",null,"\u8fdb\u5165\u5de5\u7a0b\u76ee\u5f55,\u6267\u884c\u547d\u4ee4,\u5b89\u88c5@nestjs/config\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"pnpm add @nestjs/config\n")),(0,o.kt)("p",null,"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u5728\u548c",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),"\u540c\u7ea7\u522b\u7684\u76ee\u5f55\u4e0a\u65b0\u5efa",(0,o.kt)("inlineCode",{parentName:"p"},".env"),"\u6587\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='.env' showLineNumbers",title:"'.env'",showLineNumbers:!0},"DB_TYPE=MYSQL\nDB_NAME=mydemo\nDB_URL=http://localhost:3306\nDB_USER=root\nDB_PWD=root\n")),(0,o.kt)("p",null,"\u540c\u65f6\u6211\u4eec\u4fee\u6539",(0,o.kt)("inlineCode",{parentName:"p"},"app.module.ts"),"\u6587\u4ef6\uff0c\u5f15\u5165",(0,o.kt)("inlineCode",{parentName:"p"},"ConfigModule"),",\u5e76\u5c06",(0,o.kt)("inlineCode",{parentName:"p"},"isGlobal"),"\u8bbe\u7f6e\u4e3a",(0,o.kt)("inlineCode",{parentName:"p"},"true"),"\uff0c\u8ba9",(0,o.kt)("inlineCode",{parentName:"p"},"ConfigModule"),"\u53ef\u4ee5\u5168\u5c40\u4f7f\u7528\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"{4,8-10} title='app.module.ts' showLineNumbers","{4,8-10}":!0,title:"'app.module.ts'",showLineNumbers:!0},'import { Module } from "@nestjs/common";\nimport { AppController } from "./app.controller";\nimport { AppService } from "./app.service";\nimport { ConfigModule } from "@nestjs/config";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      isGlobal: true,\n    }),\n  ],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n')),(0,o.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u4fee\u6539",(0,o.kt)("inlineCode",{parentName:"p"},"app.controller.ts"),",\u5e76\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5f15\u5165",(0,o.kt)("inlineCode",{parentName:"p"},"ConfigService"),"\uff0c\u6211\u4eec\u65b0\u589e\u4e00\u4e2a API\uff0c\u5728 API \u91cc\u9762\u89e3\u6790\u51fa",(0,o.kt)("inlineCode",{parentName:"p"},".env"),"\u91cc\u9762\u7684\u53c2\u6570\u5e76\u5c06\u53c2\u6570\u8fd4\u56de\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"{3,8-10,12-21} title='app.controller.ts' showLineNumbers","{3,8-10,12-21}":!0,title:"'app.controller.ts'",showLineNumbers:!0},'import { Controller, Get } from "@nestjs/common";\nimport { AppService } from "./app.service";\nimport { ConfigService } from "@nestjs/config";\n\n@Controller()\nexport class AppController {\n  constructor(\n    private readonly appService: AppService,\n    private readonly configService: ConfigService\n  ) {}\n\n  @Get("config")\n  getConfig(): any {\n    const config = {\n      dbType: this.configService.get("DB_TYPE"),\n      dbName: this.configService.get("DB_NAME"),\n      dbUrl: this.configService.get("DB_URL"),\n      dbUser: this.configService.get("DB_USER"),\n      dbPwd: this.configService.get("DB_PWD"),\n    };\n    return config;\n  }\n}\n')),(0,o.kt)("p",null,"\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u8bf7\u6c42 API \u63a5\u53e3",(0,o.kt)("a",{parentName:"p",href:"http://localhost:3000/config"},"http://localhost:3000/config"),", \u5f97\u5230\u6570\u636e\u914d\u7f6e\u4fe1\u606f\u3002\u81f3\u6b64",(0,o.kt)("inlineCode",{parentName:"p"},"@nestjs/config"),"\u7684\u57fa\u672c\u4f7f\u7528\u4ecb\u7ecd\u5b8c\u6bd5\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers",showLineNumbers:!0},'{\n  "dbType": "MYSQL",\n  "dbName": "mydemo",\n  "dbUrl": "http://localhost:3306",\n  "dbUser": "root",\n  "dbPwd": "root"\n}\n')),(0,o.kt)("p",null,"\u4e0b\u4e00\u8282\u6211\u4eec\u5c06\u4ecb\u7ecd Nestjs \u914d\u7f6e\u7684\u8fdb\u9636\u7528\u6cd5\u3002"))}u.isMDXComponent=!0}}]);